{% include 'topo_logout.html' %}

<main>
    <div class="container">

        <!-- ================= FORMULÁRIO DE BUSCA ================= -->
        <section id="formulario">
            <h2>Selecione Características do Jogo</h2>

            <!-- Formulário que envia os filtros para a rota /jogos -->
            <form id="form_jogos" action="/jogos" method="POST">

                <!-- Campo: Gênero -->
                <div class="campo">
                    <label for="genre-input">Gênero</label>
                    <input 
                        type="text" 
                        id="genre-input" 
                        name="genre" 
                        list="genre-list" 
                        placeholder="Ex: Action, Adventure, Racing, etc" 
                        value="{{genero or ''}}">
                    <datalist id="genre-list">
                        {% for g in generos %}
                            <option value="{{ g }}"></option>
                        {% endfor %}
                    </datalist>
                </div>

                <!-- Campo: Plataforma -->
                <div class="campo">
                    <label for="platform-input">Plataforma</label>
                    <input 
                        type="text" 
                        id="platform-input" 
                        name="platform" 
                        list="platform-list" 
                        placeholder="Ex: PC, Playstation, Android, etc" 
                        value="{{plataforma or ''}}">
                    <datalist id="platform-list">
                        {% for p in plataformas %}
                            <option value="{{ p }}"></option>
                        {% endfor %}
                    </datalist>
                </div>

                <!-- Campo: Ano de Lançamento -->
                <div class="campo">
                    <label for="year-input">Ano de Lançamento</label>
                    <input 
                        type="text" 
                        id="year-input" 
                        name="year" 
                        list="year-list" 
                        placeholder="Ex: 2000, 2010, 2024, etc" 
                        value="{{ano or ''}}">
                    <datalist id="year-list">
                        {% for a in range(1990, 2025) %}
                            <option value="{{ a }}"></option>
                        {% endfor %}
                    </datalist>
                </div>

                <!-- Campo: Tag -->
                <div class="campo">
                    <label for="tags-input">Tag</label>
                    <input 
                        type="text" 
                        id="tags-input" 
                        name="tag" 
                        list="tags-list" 
                        placeholder="Ex: Multiplayer, Singleplayer, Co-op, etc" 
                        value="{{tag or ''}}">
                    <datalist id="tags-list">
                        {% for t in tags %}
                            <option value="{{ t }}"></option>
                        {% endfor %}
                    </datalist>
                </div>

                <!-- Campo: Loja -->
                <div class="campo">
                    <label for="store-input">Loja</label>
                    <input 
                        type="text" 
                        id="store-input" 
                        name="store" 
                        list="store-list" 
                        placeholder="EX: Steam, EPIC Games, XBOX Store, etc" 
                        value="{{loja or ''}}">
                    <datalist id="store-list">
                        {% for l in lojas %}
                            <option value="{{ l }}"></option>
                        {% endfor %}
                    </datalist>
                </div>
            </form>

            <!-- Botão para enviar o formulário -->
            <br>
            <button type="submit" form="form_jogos">Receber Recomendação!</button>
        </section>

        <!-- ================= DADOS DA BUSCA ================= -->
        <section id="dados_de_busca">
            <h3>Jogos Encontrados com esse filtro: {{qtd_filtrados}}</h3>
        </section>

        <!-- ================= RESULTADO ================= -->
        <section id="resultado">

            <!-- Caso tenha erro na busca -->
            {% if erro and buscou %}
                <p class="mensagem_erro">{{erro}}</p>
            {% endif %}

            <!-- Se não veio nenhum jogo, mostra placeholder -->
            {% if not dados_jogo %}
                <img src="{{url_for('static', filename='img/placeholder_jogo.png')}}" title="resultado">
            {% else %}
            
                <!-- Capa do jogo recomendado -->
                <div class="game_cover">
                    <img id="game_cover" src="{{ dados_jogo.background_image }}" alt="capa" title="capa"/>
                </div>

                <!-- Dados do jogo recomendado -->
                <div class="game_data">
                    <h5 id="nome_recomendado">&nbsp;&nbsp;&nbsp;{{ dados_jogo.titulo }}&nbsp;&nbsp;&nbsp;</h5>

                    <div id="recomendados">
                        {% if dados_jogo.generos %}
                            <h5 class="dados_recomendado">Generos: {{ dados_jogo.generos | join(', ') }}</h5>
                        {% endif %}

                        {% if dados_jogo.plataformas %}
                            <h5 class="dados_recomendado">Plataformas: {{ dados_jogo.plataformas | join(', ') }}</h5>
                        {% endif %}

                        {% if dados_jogo.loja %}
                            <h5 class="dados_recomendado">Lojas Disponíveis: {{ dados_jogo.loja | join(', ') }}</h5>
                        {% endif %}
                    </div>

                    <!-- Botão para gerar uma nova sugestão -->
                    <button>Nova Sugestão</button>
                </div>
            {% endif %}
        </section>
    </div> 
</main>

<!-- ================= RODAPÉ ================= -->
<footer>
    <section id="brands">
        <p>
            <i class="fa-brands fa-square-whatsapp"></i>
            <i class="fa-brands fa-square-linkedin"></i>
            <i class="fa-brands fa-square-instagram"></i>
        </p>
    </section>
    <p id="mark">@ 2025, Dhialick Ferraz. Todos os direitos reservados.</p>
</footer>

<!-- Script JS para dropdown -->
<script src="{{url_for('static', filename='js/dropdown.js')}}"></script>
</body>
</html>
